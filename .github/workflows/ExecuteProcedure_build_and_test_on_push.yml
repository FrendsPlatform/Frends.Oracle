name: Frends.Oracle.ExecuteProcedure Test

on:
  push:
    branches:    
      - main
    paths:
      - 'Frends.Oracle.ExecuteProcedure/**'
  workflow_dispatch:
  

jobs:
  deploy_container:
    runs-on: ubuntu-latest
    name: Run Oracle container script
    steps:
    - name: Script
      run: ./Frends.Oracle.ExecuteProcedure/build/deploy_oracle_docker_container.sh
      shell: bash
  build:
    uses: FrendsPlatform/FrendsTasks/.github/workflows/linux_build_test.yml@main
    with:
      workdir: Frends.Oracle.ExecuteProcedure
      prebuild_command: docker-compose -f ./Frends.Oracle.ExecuteProcedure.Tests/docker-compose.yml up -d
    secrets:
      badge_service_api_key: ${{ secrets.BADGE_SERVICE_API_KEY }}